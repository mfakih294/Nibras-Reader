<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Nibras Reader v1.4.0
      <!-- {{version}} -->
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  
  <!-- <b>Nibras Files IP and port</b>: 
          <a (click) = "changeF()">
            {{ipF}} (edit)
          </a>
        -->

  <!-- <a href="files/eg.jpg" target="_blank">eg.jpg</a> -->

  <!-- <b></b>{{tosync?.split(',')?.length - 1}} records to  -->
  <!-- <a  style="font-size: small; padding: 1px" (click) = "syncDone()">commit.</a> -->
  <!--     <div style="border-bottom: 1px solid darkgray">
          
          <br/>
          
		  </div>
          <br/>
          <hr/>
          <br/>  -->

  <!-- <ion-card>
    
    <ion-card-header>

      <ion-card-title>Sync

        

      </ion-card-title>
    </ion-card-header>
    <ion-card-content>

    </ion-card-content>
  </ion-card> -->


  <!-- <div style="border-bottom: 1px solid darkgray"> -->

  <ion-card>
    <!--img src="/assets/shapes.svg" alt="" /-->
    <ion-card-header>

      <!-- <ion-card-title>New
        
      </ion-card-title> -->
    </ion-card-header>
    <ion-card-content [ngStyle]="{ 'white-space': 'pre-wrap'}">
      <form (ngSubmit)="savek();">
        <ion-select name="nktype" [(ngModel)]="nktype" interface="popover"
        mutiple="false" (value)="nktype"
        (ionChange)="savecopy()">
          <ion-select-option value='t'>New task</ion-select-option>
          <ion-select-option value='g'>New goal</ion-select-option>
          <ion-select-option value='j'>New journal</ion-select-option>
          <ion-select-option value='p'>New plan</ion-select-option>
          <ion-select-option value='n'>New note</ion-select-option>          
          <ion-select-option value='q'>New payment</ion-select-option>          
        </ion-select>

        <ion-datetime name="nkd" [(ngModel)]="nkd" (ionBlur)="savecopy()" 
          displayFormat="DD.MMM.YYYY HH:mm" pickerFormat="YYYY MMM DDD HH mm"
          minuteValues="0,15,30,45"          
           placeholder="Choose a date"></ion-datetime>
           <!-- picketOptions="{columns: ['Y', 'M', 'D', 'H', 'm']}" -->

        <ion-input  name="nkt" autofocus="true" rows="5" autosize        
        color="black" 
        (ionBlur)="savecopy()"
        style="font-size: 1.1em; display: inline-block; padding: 1px; text-align: right !important; direction: rtl !important; border: 1px solid darkgrey; background: ghostwhite" placeholder="Enter title..." 
              type="text" id="nkinputt"
          [(ngModel)]="nkt"></ion-input>

        <ion-textarea  name="nkinput" autofocus="true" rows="5" autosize
        (ionBlur)="savecopy()"
        color="black"  
        style="height: 120px; font-size: 1.1em; display: inline-block; padding: 1px; text-align: right !important; direction: rtl !important; border: 1px solid darkgrey; background: ghostwhite" placeholder="Enter note..." 
              type="text" id="nkinput"
          [(ngModel)]="nk"></ion-textarea>

        <!-- <a  style="display: inline; font-size: small; padding: 0px; margin: 0px;"  -->
        <!-- (click) = "savek();" onclick="document.getElementById('nkinput').focus()">Add</a> -->

        <ion-button outline style="text-transform: none; width: 99%;" size="small"
        onclick=""
        (click)="savek();">Add</ion-button>        
      </form>
 
      <div
          style="color: darkgray; text-align: right; font-size: small">{{nklog?.split('***')?.length - 1 == -1 ? '0' :  nklog?.split('***')?.length - 1}}
          records</div>

      <!-- <div name="nklog" id="nklog" style='overflow: auto; line-height: 20px; direction: rtl; text-align: right; border: 1px solid darkgray'  -->
      <!-- [innerHTML]="nklog"> -->
      <!-- </div> -->

      <div name="nklog" id="nklog" style='overflow: auto; line-height: 22px; direction: rtl; text-align: justified;'
        *ngFor="let line of nklog.split('***')">
        <div style="direction: ltr; text-align: left; font-size: small; color: darkgray;; font-weight: italic;">
          {{line?.split('::')[0].split('--')[0]}}
        </div>
<div style="direction: right; text-align: right; font-size: normal; color: black;; font-weight: bold;">
        {{line?.split('::')[0].split('--')[1]}}
        </div>

        <div style="border-right: 1px lightgrey solid; padding: 2px; margin: 2px; line-height: 20px; text-align: justified; font-size: 1.1em;">
          {{line?.split('::')[1]}}
        </div>
      </div>

      <ion-button outline [disabled]="isOffline" id='saveAsNoteLink' style=" padding: 1px;text-transform: none;"
      (click)="syncWritings()" size="small">
      <!-- <ion-icon name="cloud-upload-outline"></ion-icon> -->
      <!-- <ion-icon name="cloud-upload-outline"></ion-icon> -->
      Copy notes
    </ion-button>

      <ion-button (click)="clearSync()" size="small" style="text-transform: none;"
      before="if(!confirm('Are you sure you want to clear the entered notes?')) return false">Clear</ion-button>

<div id='logAreaNotes' style="font-style: italic; font-size: small; float: right; color: darkgray"></div>



    </ion-card-content>
  </ion-card>

  <ion-card class="welcome-card">
    <!--img src="/assets/shapes.svg" alt="" /-->
    <ion-card-header>

      <ion-card-title>Connect
        <br/>
        <span style="font-style: italic; font-size: small; color: darkgray">
          URL of Nibras:          
        </span>
        

        <br/>
        <form (ngSubmit)="saveIp2()">

          <ion-input name="nkinput" autofocus="true" 
          color="black" 
          style="font-size: small; display: inline-block; direction: ltr; text-align: left; padding: 1px;
                border: 1px solid darkgrey; background: ghostwhite" placeholder="IP of Nibras PKM..." 
                type="text" value="{{ipA}}"
                [(ngModel)]="ipTemp"
            ></ion-input>
          <!-- <a  style="display: inline; font-size: small; padding: 0px; margin: 0px;" (click) = "savek();" onclick="document.getElementById('nkinput').focus()">+++++++++++++++++++++++++++++++</a> -->
        </form>



        <div id='logArea' style="font-style: italic; font-size: small; float: right; color: darkgray"></div>

      </ion-card-title>
    </ion-card-header>
    <ion-card-content>

      <!-- <b>Nibras PKM address:</b> -->



      <!-- <br/> -->

      <ion-button size="small" style="text-transform: none;" (click)="change()">
        <!-- <ion-icon slot="start" name="edit"></ion-icon> -->
        Change
      </ion-button>

      <ion-button outline style="text-transform: none;" size="small" (click)="refresh()">Check</ion-button>

      <ion-button outline style="text-transform: none;" size="small" [disabled]="isOffline" (click)="syncData()">
        Sync</ion-button> &nbsp;
      

      <!-- <a  (click) = "refresh()">Check status</a> -->

           <!-- Get Nibras Desktop IP from the right of its footer area.  -->
      <!-- Enter the port if it has been changed from the default (433).  -->
      <!-- App-name is "nibras" by default. -->

    </ion-card-content>
  </ion-card>


</ion-content>